(function(e){function t(t){for(var n,o,l=t[0],r=t[1],c=t[2],d=0,u=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);m&&m(t);while(u.length)u.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},o={app:0},a={app:0},i=[];function l(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"884cefe1","chunk-743eb49e":"8a884cdc","chunk-77267223":"c7ea89ff"}[e]+".js"}function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(e){var t=[],s={about:1,"chunk-743eb49e":1,"chunk-77267223":1};o[e]?t.push(o[e]):0!==o[e]&&s[e]&&t.push(o[e]=new Promise((function(t,s){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"b07e40a2","chunk-743eb49e":"21bc14ef","chunk-77267223":"5c0c763e"}[e]+".css",a=r.p+n,i=document.getElementsByTagName("link"),l=0;l<i.length;l++){var c=i[l],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===a))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){c=u[l],d=c.getAttribute("data-href");if(d===n||d===a)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete o[e],m.parentNode.removeChild(m),s(i)},m.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){o[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,s){n=a[e]=[t,s]}));t.push(n[2]=i);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,r.nc&&d.setAttribute("nonce",r.nc),d.src=l(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(m);var s=a[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,s[1](u)}a[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=d;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0f73":function(e,t,s){},"14cd":function(e,t,s){},"2e9f":function(e,t,s){},"2f47":function(e,t,s){},"30f4":function(e,t,s){"use strict";s("c50e")},"3b53":function(e,t,s){},"3d0e":function(e,t,s){},"3dce":function(e,t,s){},"41fa":function(e,t,s){"use strict";s("ef7a")},"430b":function(e,t,s){"use strict";s("2e9f")},"48da":function(e,t,s){},"4b9e":function(e,t,s){"use strict";s("757d")},"523d":function(e,t,s){},"528c":function(e,t,s){"use strict";s("14cd")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("d3b7"),s("3ca3"),s("ddb0"),s("25f0"),s("b0c0");var n=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-app",[s("md-app-toolbar",{staticClass:"md-primary"},[s("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.showNavigation=!e.showNavigation}}},[s("svg-icon",{attrs:{type:"mdi",path:e.mdiMenu}})],1),s("h3",{staticClass:"md-title"},[e._v(e._s(e.$t(e.currentRouteName)))])],1),s("md-app-drawer",{attrs:{"md-active":e.showNavigation,"md-persistent":e.persistent,id:"navbar"},on:{"update:mdActive":function(t){e.showNavigation=t},"update:md-active":function(t){e.showNavigation=t}},nativeOn:{click:function(t){return e.closeNavigation.apply(null,arguments)}}},[s("Menu")],1),s("md-app-content",[s("router-view")],1)],1)},a=[],i=(s("2ca0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-list",[s("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[s("span",{staticClass:"md-title"},[e._v(e._s(e.$t("title")))])]),e.loggedIn?s("div",[s("Item",{attrs:{to:"/",icon:e.mdiHome,title:"drawer.home"}}),s("Item",{attrs:{to:"/countdown",icon:e.mdiCameraTimer,title:"drawer.countdown"}}),s("Item",{attrs:{to:"/homework/0",icon:e.mdiFormatListChecks,title:"drawer.homework"}}),s("Item",{attrs:{to:"/homework/all",icon:e.mdiFormatListCheckbox,title:"drawer.allHomework"}}),s("Item",{attrs:{to:"/settings",icon:e.mdiCog,title:"drawer.settings"}}),s("Item",{attrs:{to:"/about",icon:e.mdiInformation,title:"drawer.about"}})],1):s("div",[s("Item",{attrs:{to:"/login",icon:e.mdiLoginVariant,title:"drawer.login"}}),s("Item",{attrs:{to:"/register",icon:e.mdiAccountPlus,title:"drawer.register"}}),s("Item",{attrs:{to:"/about",icon:e.mdiInformation,title:"drawer.about"}})],1)],1)}),l=[],r=s("94ed"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{attrs:{to:e.to}},[s("md-ripple",[s("md-list-item",[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.icon}})],1),s("span",{staticClass:"md-list-item-text"},[e._v(e._s(e.$t(e.title)))])],1)],1)],1)},d=[],u=s("1fee"),m={name:"Item",components:{SvgIcon:u["a"]},props:["to","icon","title"]},h=m,f=(s("4b9e"),s("2877")),b=Object(f["a"])(h,c,d,!1,null,"fb4165d6",null),p=b.exports,w={name:"Menu",components:{Item:p},data:function(){return{loggedIn:localStorage.getItem("token"),mdiLoginVariant:r["n"],mdiHome:r["l"],mdiInformation:r["m"],mdiCog:r["h"],mdiCameraTimer:r["c"],mdiFormatListChecks:r["k"],mdiFormatListCheckbox:r["j"],mdiAccountPlus:r["a"]}}},v=w,g=Object(f["a"])(v,i,l,!1,null,"1359cc95",null),_=g.exports,k={data:function(){return{showNavigation:!1,persistent:window.screen.width>700||window.screen.orientation.type.startsWith("landscape")?"mini":"full",mdiMenu:r["o"]}},components:{Menu:_,SvgIcon:u["a"]},computed:{currentRouteName:function(){return this.$route.name}},methods:{closeNavigation:function(){this.showNavigation=!1}}},y=k,j=(s("d78f"),Object(f["a"])(y,o,a,!1,null,"afa8f60c",null)),C=j.exports,$=s("9483");Object($["a"])("".concat("/static/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var x=s("8c4f"),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("Countdown",{staticClass:"countdown"}),s("h1",{staticClass:"title"},[e._v(e._s(e.$t("drawer.homework")))]),s("AllHomework",{staticClass:"homework"})],1)},E=[],O=(s("ac1f"),s("00b4"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-progress-bar",{staticClass:"time",attrs:{"md-mode":"determinate","md-value":e.progress}}),e.ended?s("h1",{staticClass:"lesson-progress"},[e._v(e._s(e.$t("countdown.ended")))]):s("h1",{staticClass:"lesson-progress"},[e._v(e._s(e.$t(e.template,{time:e.nowLesson+1}))+" "),s("br"),e._v(" "+e._s(e.deltaToStr))])],1)}),I=[],T=(s("fb6a"),s("99af"),s("4d90"),{name:"Countdown",data:function(){return{current:new Date,nowLesson:0,template:"countdown.tillEnd"}},methods:{strToTime:function(e){var t=parseInt(e.slice(0,2)),s=parseInt(e.slice(3,5)),n=parseInt(e.slice(6,8));return s+=60*t,n+=60*s,n},getDelta:function(e,t){return e-t},checkStarted:function(e){e>this.bellLength?this.template="countdown.tillStart":this.template="countdown.tillEnd"}},computed:{showDelta:function(){var e=60*this.current.getHours()*60+60*this.current.getMinutes()+this.current.getSeconds(),t=-this.getDelta(e,this.strToTime(window.store.getters.nextBell.end));return this.checkStarted(t),"countdown.tillStart"===this.template&&(t-=this.bellLength),t},deltaToStr:function(){var e=this.showDelta,t=Math.floor(e/3600);e-=60*t*60;var s=Math.floor(e/60);return e-=60*s,"".concat(t,":").concat(s.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"))},bellLength:function(){return this.getDelta(this.strToTime(window.store.getters.nextBell.end),this.strToTime(window.store.getters.nextBell.start))},progress:function(){return 100*(1-this.showDelta/this.bellLength)},ended:function(){return this.showDelta<0}},mounted:function(){var e=this;setInterval((function(){e.current=new Date;for(var t=60*e.current.getHours()*60+60*e.current.getMinutes()+e.current.getSeconds(),s=window.store.getters.todayBells.length;s--;s>0){var n=e.getDelta(t,e.strToTime(window.store.getters.todayBells[s].end));n<0&&(e.nowLesson=s)}}),1e3)}}),D=T,L=(s("6405"),Object(f["a"])(D,O,I,!1,null,"ca0892a8",null)),A=L.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-list",e._l(e.getHometasks,(function(t){return s("md-list-item",{key:t.id,class:{fired:t.fired}},[s("md-checkbox",{on:{change:function(s){return e.markAsDone(t)}},model:{value:t.done,callback:function(s){e.$set(t,"done",s)},expression:"i.done"}},[s("span",{attrs:{title:t.subject.title}},[e._v(e._s(t.subject.icon))]),e._v(" "+e._s(t.text)+" "),s("time",{staticClass:"deadline"},[e._v(e._s(t.deadline))])])],1)})),1)],1)},N=[],H=(s("07ac"),s("4e82"),{name:"AllHomework",methods:{markAsDone:function(e){window.ws.hometaskClass.changeTask({id:e.id,done:e.done,text:e.text,homework_id:e.hometask_id})}},computed:{getHometasks:function(){var e=window.store.state.hometasks.tasks_by_server_id;console.log(e);for(var t=[],s=0,n=Object.values(e);s<n.length;s++)for(var o=n[s],a=0,i=Object.values(o.tasks);a<i.length;a++){var l=i[a];l.done||t.push({id:l.id,subject:o.subject,text:l.text,deadline:o.deadline,fired:Date.parse(o.deadline)<=Date.now(),done:l.done,hometask_id:o.id})}return t.sort((function(e,t){return Date.parse(e.deadline)-Date.parse(t.deadline)})),t}}}),M=H,P=(s("b841"),Object(f["a"])(M,B,N,!1,null,"bbb47eee",null)),q=P.exports,W={name:"Home",components:{AllHomework:q,Countdown:A},mounted:function(){console.log(this.$store.state.test)}},F=W,R=(s("ec03"),Object(f["a"])(F,S,E,!1,null,"337add44",null)),V=R.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",[s("h1",{staticClass:"md-title"},[e._v(e._s(e.$t("drawer.login")))]),s("md-field",{class:e.loginClass},[s("label",{attrs:{for:"username"}},[e._v(e._s(e.$t("login.username")))]),s("md-input",{attrs:{name:"username",id:"username",disabled:e.sending,required:"",autofocus:""},on:{keydown:function(t){e.error=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.focusNext.apply(null,arguments)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e.error?s("span",{staticClass:"md-error"},[e._v(e._s(e.$t("login.wrongUsername")))]):e._e()],1),s("md-field",{class:e.loginClass},[s("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("login.password")))]),s("md-input",{attrs:{name:"password",id:"password",disabled:e.sending,required:"",type:"password"},on:{keydown:function(t){e.error=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.error?s("span",{staticClass:"md-error"},[e._v(e._s(e.$t("login.wrongPassword")))]):e._e()],1),s("div",{staticClass:"buttons"},[s("md-button",{staticClass:"right-button"},[s("router-link",{attrs:{to:"/register"}},[e._v(e._s(e.$t("drawer.register")))])],1),s("md-button",{staticClass:"md-primary left-button",attrs:{disabled:e.sending},on:{click:e.send}},[e._v(e._s(e.$t("drawer.login")))])],1)],1)},K=[],U=(s("a630"),{name:"Login",data:function(){return{username:"",password:"",sending:!1,error:!1}},methods:{send:function(){this.sending=!0,window.ws.setListener(this.checkAnswer),window.ws.send({event:"authentication.user",username:this.username,password:this.password})},checkAnswer:function(e){"authentication.error"===e.event?(this.sending=!1,this.error=!0):"authentication.token"===e.event&&(localStorage.setItem("token",e.token),Ct.back())},focusNext:function(e){var t=Array.from(e.target.form.querySelectorAll("input")),s=t.indexOf(e.target);s<t.length&&t[s+1].focus()}},computed:{loginClass:function(){return{"md-invalid":this.error}}}}),z=U,Q=(s("c1e2"),Object(f["a"])(z,J,K,!1,null,"f9a1cb74",null)),Z=Q.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-list",[s("Item",{attrs:{to:"settings/subjects",icon:e.mdiChairSchool,title:"settings.main.subjects"}}),s("Item",{attrs:{to:"settings/lessons",icon:e.mdiBell,title:"settings.main.bells"}}),s("Item",{attrs:{to:"settings/timetable",icon:e.mdiTimetable,title:"settings.main.timetable"}})],1)},Y=[],G={name:"Settings",components:{Item:p},data:function(){return{mdiBell:r["b"],mdiChairSchool:r["d"],mdiDevices:r["i"],mdiTimetable:r["q"]}}},ee=G,te=Object(f["a"])(ee,X,Y,!1,null,"04c67737",null),se=te.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-table",[s("md-table-row",[s("md-table-head",[e._v(e._s(e.$t("common.days.monday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.tuesday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.wednesday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.thursday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.friday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.saturday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.sunday")))])],1),e._l(e.max_bells,(function(t,n){return s("md-table-row",{key:n},[s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.mo[n])}}},[e.bells.mo[n]?s("p",[e._v(e._s(e.bells.mo[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.tu[n])}}},[e.bells.tu[n]?s("p",[e._v(e._s(e.bells.tu[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.we[n])}}},[e.bells.we[n]?s("p",[e._v(e._s(e.bells.we[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.th[n])}}},[e.bells.th[n]?s("p",[e._v(e._s(e.bells.th[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.fr[n])}}},[e.bells.fr[n]?s("p",[e._v(e._s(e.bells.fr[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.sa[n])}}},[e.bells.sa[n]?s("p",[e._v(e._s(e.bells.sa[n]["start"]))]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.bells.su[n])}}},[e.bells.su[n]?s("p",[e._v(e._s(e.bells.su[n]["start"]))]):e._e()])],1)}))],2),s("Edit",{ref:"editModal",attrs:{bell:e.edit_bell}}),s("md-button",{staticClass:"md-fab",on:{click:function(t){return e.setEdit({id:0,start:"00:00",end:"00:00",days:[]})}}},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.add}})],1)],1)],1)},oe=[],ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-dialog",{attrs:{"md-active":e.opened},on:{"update:mdActive":function(t){e.opened=t},"update:md-active":function(t){e.opened=t}}},[s("md-dialog-title",[e._v(e._s(e.$t("common.edit.edit")))]),s("div",{attrs:{id:"inputs"}},[s("md-field",[s("label",{attrs:{for:"start"}},[e._v(e._s(e.$t("settings.bells.start")))]),s("md-input",{attrs:{id:"start",type:"time"},model:{value:e.bell.start,callback:function(t){e.$set(e.bell,"start",t)},expression:"bell.start"}})],1),s("md-field",[s("label",{attrs:{for:"end"}},[e._v(e._s(e.$t("settings.bells.end")))]),s("md-input",{attrs:{id:"end",type:"time"},model:{value:e.bell.end,callback:function(t){e.$set(e.bell,"end",t)},expression:"bell.end"}})],1),s("md-field",[s("label",{attrs:{for:"days"}},[e._v(e._s(e.$t("settings.bells.days")))]),s("md-select",{attrs:{name:"days",id:"days","md-dense":"",multiple:""},model:{value:e.bell.days,callback:function(t){e.$set(e.bell,"days",t)},expression:"bell.days"}},[s("md-option",{attrs:{value:"mo"}},[e._v(e._s(e.$t("common.days.monday")))]),s("md-option",{attrs:{value:"tu"}},[e._v(e._s(e.$t("common.days.tuesday")))]),s("md-option",{attrs:{value:"we"}},[e._v(e._s(e.$t("common.days.wednesday")))]),s("md-option",{attrs:{value:"th"}},[e._v(e._s(e.$t("common.days.thursday")))]),s("md-option",{attrs:{value:"fr"}},[e._v(e._s(e.$t("common.days.friday")))]),s("md-option",{attrs:{value:"sa"}},[e._v(e._s(e.$t("common.days.saturday")))]),s("md-option",{attrs:{value:"su"}},[e._v(e._s(e.$t("common.days.sunday")))])],1)],1)],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-accent",on:{click:e.deleteBell}},[e._v(e._s(e.$t("common.edit.delete")))]),s("md-button",{staticClass:"md-primary",on:{click:e.toggle}},[e._v(e._s(e.$t("common.edit.cancel")))]),s("md-button",{staticClass:"md-primary",on:{click:e.save}},[e._v(e._s(e.$t("common.edit.save")))])],1)],1)},ie=[],le={name:"Edit",data:function(){return{opened:!1}},methods:{toggle:function(){this.opened=!this.opened},save:function(){window.ws.bellClass.change(this.bell),this.toggle()},deleteBell:function(){window.ws.bellClass.delete(this.bell),this.toggle()}},props:["bell"]},re=le,ce=(s("d687"),Object(f["a"])(re,ae,ie,!1,null,"51525129",null)),de=ce.exports,ue={name:"Bells",components:{Edit:de,SvgIcon:u["a"]},data:function(){return{bells_orig:[],edit_bell:{start:"00:00",end:"00:00",days:[]},add:r["p"]}},computed:{bells:function(){return window.store.getters.getBells.bells},max_bells:function(){return console.log(window.store.state),window.store.getters.getBells.max_bells}},methods:{setEdit:function(e){this.edit_bell=e,this.$refs.editModal.toggle()}}},me=ue,he=(s("70f2"),Object(f["a"])(me,ne,oe,!1,null,"4473fc2c",null)),fe=he.exports,be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-table",[s("md-table-row",[s("md-table-head",{staticStyle:{width:"100px"}},[e._v(e._s(e.$t("settings.subjects.icon")))]),s("md-table-head",[e._v(e._s(e.$t("settings.subjects.subject")))]),s("md-table-head",[e._v(e._s(e.$t("settings.subjects.room")))]),s("md-table-head",[e._v(e._s(e.$t("settings.subjects.teacher")))])],1),e._l(e.subjects,(function(t){return s("md-table-row",{key:t.id,on:{click:function(s){return e.setEdit(t)}}},[s("md-table-cell",[s("p",{staticClass:"emoji-icon"},[e._v(e._s(t.icon))])]),s("md-table-cell",[e._v(e._s(t.title))]),s("md-table-cell",[e._v(e._s(t.room))]),s("md-table-cell",[e._v(e._s(t.teacher))])],1)}))],2),s("Edit",{ref:"editModal",attrs:{subject:e.edit_subject}}),s("md-button",{staticClass:"md-fab",on:{click:function(t){return e.setEdit({id:0,title:"",icon:"🧑‍🏫",room:"",teacher:""})}}},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.add}})],1)],1)],1)},pe=[],we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-dialog",{attrs:{"md-active":e.opened},on:{"update:mdActive":function(t){e.opened=t},"update:md-active":function(t){e.opened=t}}},[s("md-dialog-title",[e._v(e._s(e.$t("common.edit.edit")))]),s("div",{attrs:{id:"inputs"}},[s("md-field",[s("label",{attrs:{for:"title"}},[e._v(e._s(e.$t("settings.subjects.edit.name")))]),s("md-input",{attrs:{id:"title",required:""},model:{value:e.subject.title,callback:function(t){e.$set(e.subject,"title",t)},expression:"subject.title"}})],1),s("div",[s("p",[e._v(e._s(e.$t("settings.subjects.edit.icon")))]),s("md-button",{staticClass:"md-dense md-primary",staticStyle:{height:"100px","font-size":"90px"},attrs:{id:"icon"},on:{click:function(t){e.showEmoji=!e.showEmoji}}},[e._v(e._s(e.subject.icon))]),s("br"),s("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:e.showEmoji,expression:"showEmoji"}],style:{width:"340px",height:"440px"},on:{select:e.selectEmoji}})],1),s("md-field",[s("label",{attrs:{for:"room"}},[e._v(e._s(e.$t("settings.subjects.edit.room")))]),s("md-input",{attrs:{id:"room"},model:{value:e.subject.room,callback:function(t){e.$set(e.subject,"room",t)},expression:"subject.room"}})],1),s("md-field",[s("label",{attrs:{for:"teacher"}},[e._v(e._s(e.$t("settings.subjects.edit.teacher")))]),s("md-input",{attrs:{id:"teacher"},model:{value:e.subject.teacher,callback:function(t){e.$set(e.subject,"teacher",t)},expression:"subject.teacher"}})],1)],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-accent",on:{click:e.deleteSubject}},[e._v(e._s(e.$t("common.edit.delete")))]),s("md-button",{staticClass:"md-primary",on:{click:e.toggle}},[e._v(e._s(e.$t("common.edit.cancel")))]),s("md-button",{staticClass:"md-primary",on:{click:e.save}},[e._v(e._s(e.$t("common.edit.save")))])],1)],1)},ve=[],ge=s("79b5"),_e={name:"Edit",data:function(){return{opened:!1,showEmoji:!1}},components:{VEmojiPicker:ge["a"]},methods:{toggle:function(){this.opened=!this.opened},save:function(){window.ws.subjectClass.change(this.subject),this.toggle()},deleteSubject:function(){window.ws.subjectClass.delete(this.subject),this.toggle()},selectEmoji:function(e){this.subject.icon=e.data,this.showEmoji=!1}},props:["subject"]},ke=_e,ye=(s("30f4"),Object(f["a"])(ke,we,ve,!1,null,"56a92df9",null)),je=ye.exports,Ce={name:"Subjects",components:{Edit:je,SvgIcon:u["a"]},data:function(){return{edit_subject:{id:0,title:"",icon:"🧑‍🏫",room:"",teacher:""},add:r["p"]}},computed:{subjects:function(){return window.store.state.subjects.subjects}},methods:{setEdit:function(e){this.edit_subject=e,this.$refs.editModal.toggle()}}},$e=Ce,xe=(s("430b"),Object(f["a"])($e,be,pe,!1,null,"4ecf0c34",null)),Se=xe.exports,Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-table",[s("md-table-row",[s("md-table-head",[e._v(e._s(e.$t("common.days.monday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.tuesday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.wednesday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.thursday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.friday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.saturday")))]),s("md-table-head",[e._v(e._s(e.$t("common.days.sunday")))])],1),e._l(e.max_bells,(function(t,n){return s("md-table-row",{key:n},[s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.mo[e.bells.mo[n].id],e.bells.mo[n],"mo")}}},[e.bells.mo[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.mo[e.bells.mo[n].id]?s("span",[e._v(e._s(e.lessons.mo[e.bells.mo[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.tu[e.bells.tu[n].id],e.bells.tu[n],"tu")}}},[e.bells.tu[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.tu[e.bells.tu[n].id]?s("span",[e._v(e._s(e.lessons.tu[e.bells.tu[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.we[e.bells.we[n].id],e.bells.we[n],"we")}}},[e.bells.we[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.we[e.bells.we[n].id]?s("span",[e._v(e._s(e.lessons.we[e.bells.we[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.th[e.bells.th[n].id],e.bells.th[n],"th")}}},[e.bells.th[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.th[e.bells.th[n].id]?s("span",[e._v(e._s(e.lessons.th[e.bells.th[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.fr[e.bells.fr[n].id],e.bells.fr[n],"fr")}}},[e.bells.fr[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.fr[e.bells.fr[n].id]?s("span",[e._v(e._s(e.lessons.fr[e.bells.fr[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.sa[e.bells.sa[n].id],e.bells.sa[n],"sa")}}},[e.bells.sa[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.sa[e.bells.sa[n].id]?s("span",[e._v(e._s(e.lessons.sa[e.bells.sa[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()]),s("md-table-cell",{nativeOn:{click:function(t){return e.setEdit(e.lessons.su[e.bells.su[n].id],e.bells.su[n],"su")}}},[e.bells.su[n]?s("p",{staticClass:"emoji-icon"},[e.lessons.su[e.bells.su[n].id]?s("span",[e._v(e._s(e.lessons.su[e.bells.su[n].id].subject.icon))]):s("span",[e._v("🚫")])]):e._e()])],1)}))],2),s("Edit",{ref:"edit",attrs:{bell:e.edit_bell,lesson:e.edit_lesson}})],1)},Oe=[],Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-dialog",{attrs:{"md-active":e.opened},on:{"update:mdActive":function(t){e.opened=t},"update:md-active":function(t){e.opened=t}}},[s("md-dialog-title",[e._v(e._s(e.$t("common.edit.edit")))]),s("md-content",[s("p",[e._v(e._s(e.bell.start)+" - "+e._s(e.bell.end))]),e._l(e.subjects,(function(t){return s("md-radio",{key:t.id,attrs:{value:t},nativeOn:{click:function(t){return e.change.apply(null,arguments)}},model:{value:e.lesson.subject,callback:function(t){e.$set(e.lesson,"subject",t)},expression:"lesson.subject"}},[e._v(e._s(t.icon)+" "+e._s(t.title))])}))],2)],1)},Te=[],De={name:"Edit",data:function(){return{opened:!1}},methods:{toggle:function(){this.opened=!this.opened},save:function(){window.ws.bellClass.change(this.bell),this.toggle()},deleteBell:function(){window.ws.bellClass.delete(this.bell),this.toggle()},change:function(){void 0===this.lesson.bell&&(this.lesson.bell=this.bell),void 0===this.lesson.day&&(this.lesson.day=this.day),window.ws.lessonsClass.change(this.lesson),this.toggle()}},props:["lesson","bell"],computed:{subjects:function(){return window.store.state.subjects.subjects}}},Le=De,Ae=(s("ce13"),Object(f["a"])(Le,Ie,Te,!1,null,"3ec626d0",null)),Be=Ae.exports,Ne={name:"Timetable",components:{Edit:Be},data:function(){return{bells_orig:[],edit_bell:{start:"00:00",end:"00:00",days:[]},edit_lesson:{}}},computed:{bells:function(){return window.store.state.bells.bells},max_bells:function(){return window.store.state.bells.max_bells},lessons:function(){return window.store.state.lessons.lessons}},methods:{setEdit:function(e,t,s){this.edit_bell=t,this.edit_lesson=e,void 0===this.edit_lesson&&(this.edit_lesson={subject:{},bell:this.edit_bell,day:s}),this.$refs.edit.toggle()}}},He=Ne,Me=(s("9a94"),Object(f["a"])(He,Ee,Oe,!1,null,"c15fa886",null)),Pe=Me.exports,qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"hammer",rawName:"v-hammer:swipe",value:e.changeDay,expression:"changeDay",arg:"swipe"}],staticStyle:{"min-height":"calc(100vh - 100px)"}},[s("DateSwitcher",{ref:"dateChange",attrs:{date:e.$route.params.day,text:e.date.toLocaleDateString()+" "+e.days_names[e.date.getDay()]}}),s("md-list",[e._l(e.hometasks,(function(t){return s("md-ripple",{key:t.id,nativeOn:{click:function(s){return e.setEdit(t.id)}}},[s("md-list-item",[s("md-icon",[e._v(e._s(t.subject.icon))]),s("span",{staticClass:"md-list-item-text"},[e._v(e._s(t.subject.title))])],1)],1)})),e._l(e.lessons,(function(t){return s("md-ripple",{key:"s"+t.id,nativeOn:{click:function(s){return e.createHomework(t)}}},[s("md-list-item",[s("md-icon",[e._v(e._s(t.subject.icon))]),s("span",{staticClass:"md-list-item-text"},[e._v(e._s(t.subject.title))])],1)],1)})),s("md-ripple",{nativeOn:{click:function(t){return e.createNew.apply(null,arguments)}}},[s("md-list-item",[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiPlus}})],1),s("span",{staticClass:"md-list-item-text"},[e._v(e._s(e.$t("hometask.new")))])],1)],1)],2),s("SeeTask",{ref:"editModal",attrs:{hometask:e.openedHometask}}),s("SelectSubject",{ref:"selectSubject",attrs:{date:e.date}})],1)},We=[],Fe=(s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-toolbar",[s("router-link",{attrs:{to:e.prev}},[s("md-button",{staticClass:"md-icon-button right-button"},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiChevronLeft}})],1)],1)],1),s("p",{staticClass:"centered"},[e._v(e._s(e.text))]),s("router-link",{attrs:{to:e.next}},[s("md-button",{staticClass:"md-icon-button left-button"},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiChevronRight}})],1)],1)],1)],1)}),Re=[],Ve={name:"DateSwitcher",components:{SvgIcon:u["a"]},data:function(){return{mdiChevronLeft:r["e"],mdiChevronRight:r["f"]}},props:["date","text"],computed:{prev:function(){return"/homework/".concat(this.date-1)},next:function(){return"/homework/".concat(parseInt(this.date)+1)}}},Je=Ve,Ke=(s("6a73"),Object(f["a"])(Je,Fe,Re,!1,null,"58cf6392",null)),Ue=Ke.exports,ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-dialog",{attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[s("div",{staticClass:"scrollable"},[s("md-dialog-title",[e._v(e._s(e.$t("hometask.see.task")))]),s("md-button",{staticClass:"close",on:{click:e.toggle}},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiClose}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",{attrs:{for:"subject"}},[e._v(e._s(e.$t("hometask.see.subject")))]),s("md-select",{attrs:{name:"subject",id:"subject"},on:{"md-selected":e.save},model:{value:e.hometask.subject.id,callback:function(t){e.$set(e.hometask.subject,"id",t)},expression:"hometask.subject.id"}},e._l(e.subjects,(function(t){return s("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.icon)+" "+e._s(t.title))])})),1)],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-datepicker",{attrs:{name:"deadline"},on:{"md-closed":e.delayedSave},model:{value:e.hometask.deadline,callback:function(t){e.$set(e.hometask,"deadline",t)},expression:"hometask.deadline"}},[s("label",[e._v(e._s(e.$t("hometask.see.deadline")))])])],1),s("div",{staticClass:"md-layout-item"},[s("ToDoList",{attrs:{tasks:e.hometask.tasks,"hometask-id":e.hometask.id}})],1)],1)])},Qe=[],Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-list",[e._l(e.tasks,(function(t){return s("md-list-item",{key:t.id,on:{click:function(s){return e.changeTask(t)}}},[s("div",[s("md-checkbox",{on:{change:function(s){return e.changeTask(t)}},model:{value:t.done,callback:function(s){e.$set(t,"done",s)},expression:"task.done"}})],1),s("md-field",[s("md-input",{on:{focusout:function(s){return e.changeTask(t)}},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"task.text"}})],1)],1)})),s("md-list-item",[s("md-field",[s("label",[e._v(e._s(e.$t("hometask.see.tasks.new")))]),s("md-input",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.newTask.apply(null,arguments)}},model:{value:e.newText,callback:function(t){e.newText=t},expression:"newText"}}),s("md-button",{on:{click:e.newTask}},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiPlus}})],1)],1)],1)],1)],2)},Xe=[],Ye={name:"ToDoList",data:function(){return{newText:"",mdiPlus:r["p"]}},components:{SvgIcon:u["a"]},props:["tasks","hometaskId"],methods:{changeTask:function(e){e.homework_id=this.hometaskId,window.ws.hometaskClass.changeTask(e)},newTask:function(){var e={homework_id:this.hometaskId,text:this.newText};window.ws.hometaskClass.changeTask(e),this.newText=""}}},Ge=Ye,et=(s("ff72"),s("9339"),Object(f["a"])(Ge,Ze,Xe,!1,null,"fcea7bf6",null)),tt=et.exports,st={name:"SeeTask",components:{ToDoList:tt,SvgIcon:u["a"]},data:function(){return{showDialog:!1,mdiClose:r["g"]}},methods:{toggle:function(){this.showDialog=!this.showDialog},delayedSave:function(){setTimeout(this.save,100)},save:function(){window.ws.hometaskClass.change(this.hometask)}},props:["hometask"],computed:{subjects:function(){return window.store.state.subjects.subjects}},mounted:function(){this.$material.locale.firstDayOfAWeek=1}},nt=st,ot=(s("5fb4"),Object(f["a"])(nt,ze,Qe,!1,null,"c3ec9a40",null)),at=ot.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-dialog",{attrs:{"md-active":e.opened},on:{"update:mdActive":function(t){e.opened=t},"update:md-active":function(t){e.opened=t}}},[s("md-button",{staticClass:"close",on:{click:e.toggle}},[s("md-icon",[s("svg-icon",{attrs:{type:"mdi",path:e.mdiClose}})],1)],1),s("md-list",e._l(e.subjects,(function(t){return s("md-list-item",{key:t.id,on:{click:function(s){return e.create(t)}}},[s("md-button",{staticClass:"item-button"},[e._v(e._s(t.icon)+" "+e._s(t.title))])],1)})),1)],1)},lt=[],rt={name:"SelectSubject",data:function(){return{opened:!1,mdiClose:r["g"]}},components:{SvgIcon:u["a"]},props:["date"],methods:{toggle:function(){this.opened=!this.opened},create:function(e){console.log(e),window.ws.hometaskClass.change({subject:e,deadline:this.date.toISOString().substring(0,10)}),this.toggle()}},computed:{subjects:function(){return window.store.state.subjects.subjects}}},ct=rt,dt=(s("f530"),Object(f["a"])(ct,it,lt,!1,null,null,null)),ut=dt.exports,mt={name:"Homework",components:{SelectSubject:ut,SeeTask:at,DateSwitcher:Ue,SvgIcon:u["a"]},data:function(){return{openedHometaskId:0,days_names:["",this.$t("common.days_short.monday"),this.$t("common.days_short.tuesday"),this.$t("common.days_short.wednesday"),this.$t("common.days_short.thursday"),this.$t("common.days_short.friday"),this.$t("common.days_short.saturday"),this.$t("common.days_short.sunday")],mdiPlus:r["p"]}},computed:{date:function(){var e=new Date;return e.setDate(e.getDate()+parseInt(this.$route.params.day)),e},hometasks:function(){var e=window.store.state.hometasks.tasks[this.date.toLocaleDateString()];return e||[]},hometasksByServerId:function(){return window.store.state.hometasks.tasks_by_server_id},lessons:function(){var e={};switch(this.date.getDay()){case 1:e=window.store.state.lessons.lessons.mo;break;case 2:e=window.store.state.lessons.lessons.tu;break;case 3:e=window.store.state.lessons.lessons.we;break;case 4:e=window.store.state.lessons.lessons.th;break;case 5:e=window.store.state.lessons.lessons.fr;break;case 6:e=window.store.state.lessons.lessons.sa;break;case 7:e=window.store.state.lessons.lessons.su;break}return this.hometasks.forEach((function(t){delete e[t.subject.id]})),e},openedHometask:function(){return void 0!==this.hometasks&&this.openedHometaskId in this.hometasksByServerId?this.hometasksByServerId[this.openedHometaskId]:{subject:{id:0}}}},methods:{setEdit:function(e){this.openedHometaskId=e,this.$refs.editModal.toggle()},createNew:function(){this.$refs.selectSubject.toggle()},changeDay:function(e){2===e.direction?this.$router.push(this.$refs.dateChange.next):4===e.direction&&this.$router.push(this.$refs.dateChange.prev)},createHomework:function(e){this.$refs.selectSubject.create(e.subject),this.$refs.selectSubject.opened=!1}}},ht=mt,ft=(s("41fa"),Object(f["a"])(ht,qe,We,!1,null,"00f51879",null)),bt=ft.exports,pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",[s("h1",{staticClass:"md-title"},[e._v(e._s(e.$t("drawer.register")))]),s("md-field",{class:e.loginClass},[s("label",{attrs:{for:"username"}},[e._v(e._s(e.$t("login.username")))]),s("md-input",{attrs:{name:"username",id:"username",disabled:e.sending,required:"",autofocus:"",type:"email"},on:{keydown:function(t){e.error=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.focusNext.apply(null,arguments)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e.error?s("span",{staticClass:"md-error"},[e._v(e._s(e.$t("login.wrongUsername")))]):e._e()],1),s("md-field",{class:e.loginClass},[s("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("login.password")))]),s("md-input",{attrs:{name:"password",id:"password",disabled:e.sending,required:"",type:"password"},on:{keydown:function(t){e.error=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.error?s("span",{staticClass:"md-error"},[e._v(e._s(e.$t("login.wrongPassword")))]):e._e()],1),s("md-button",{staticClass:"md-primary right-button",attrs:{disabled:e.sending},on:{click:e.send}},[e._v(e._s(e.$t("drawer.login")))])],1)},wt=[],vt={name:"Login",data:function(){return{username:"",password:"",sending:!1,error:!1}},methods:{send:function(){this.sending=!0,window.ws.setListener(this.checkAnswer,"authentication.token"),window.ws.send({event:"authentication.register",username:this.username,password:this.password})},checkAnswer:function(e){"authentication.error"===e.event?(this.sending=!1,this.error=!0):"authentication.token"===e.event&&(localStorage.setItem("token",e.token),Ct.push("/settings"),window.location.reload())},focusNext:function(e){var t=Array.from(e.target.form.querySelectorAll("input")),s=t.indexOf(e.target);s<t.length&&t[s+1].focus()}},computed:{loginClass:function(){return{"md-invalid":this.error}}}},gt=vt,_t=(s("528c"),Object(f["a"])(gt,pt,wt,!1,null,"30cd2e7e",null)),kt=_t.exports;n["default"].use(x["a"]);var yt=[{path:"/",name:"drawer.home",component:V},{path:"/about",name:"drawer.about",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/login",name:"drawer.login",component:Z},{path:"/register",name:"drawer.register",component:kt},{path:"/countdown",name:"drawer.countdown",component:A},{path:"/homework/all",name:"drawer.allHomework",component:q},{path:"/homework/:day",name:"drawer.homework",component:bt},{path:"/settings",name:"drawer.settings",component:se},{path:"/settings/lessons",name:"settings.main.bells",component:fe},{path:"/settings/subjects",name:"settings.main.subjects",component:Se},{path:"/settings/timetable",name:"settings.main.timetable",component:Pe}],jt=new x["a"]({routes:yt}),Ct=jt,$t=s("6591"),xt=s("2f62"),St=s("43f9"),Et=s.n(St),Ot=(s("51de"),s("a925")),It=s("d4ec"),Tt=s("bee2"),Dt=(s("e9c4"),function(){function e(){Object(It["a"])(this,e),this.ask="timetable.bells.fetch"}return Object(Tt["a"])(e,[{key:"change",value:function(e){var t={id:e.id,start:e.start,end:e.end,days:e.days};window.ws.send({event:"timetable.bells.change",data:t})}},{key:"delete",value:function(e){window.ws.send({event:"timetable.bells.delete",id:e.id})}}]),e}()),Lt=function(){function e(){Object(It["a"])(this,e),this.ask="timetable.subjects.fetch"}return Object(Tt["a"])(e,[{key:"change",value:function(e){var t={id:e.id,title:e.title,icon:e.icon,room:e.room,teacher:e.teacher};console.log(t),window.ws.send({event:"timetable.subjects.change",data:t})}},{key:"delete",value:function(e){window.ws.send({event:"timetable.subjects.delete",id:e.id})}}]),e}(),At=function(){function e(){Object(It["a"])(this,e),this.ask="timetable.lessons.fetch",this.subjects=[]}return Object(Tt["a"])(e,[{key:"change",value:function(e){window.ws.send({event:"timetable.lessons.change",data:e})}},{key:"delete",value:function(e){window.ws.send({event:"timetable.lessons.delete",id:e.id})}}]),e}(),Bt=function(){function e(){Object(It["a"])(this,e),this.ask="hometask.fetch"}return Object(Tt["a"])(e,[{key:"listener",value:function(e){var t=this;this.data.tasks={},this.data.tasks_by_server_id={},e.data.forEach((function(e){var s=e.deadline;s=new Date(s).toLocaleDateString(),s in t.data.tasks||(t.data.tasks[s]=[]),t.data.tasks[s].push(e),t.data.tasks_by_server_id[e.id]=e}))}},{key:"changeTask",value:function(e){var t={id:e.id,done:e.done,text:e.text,homework_id:e.homework_id};window.ws.send({event:"hometask.task.change",data:t})}},{key:"change",value:function(e){var t={id:e.id,deadline:e.deadline,subject:e.subject.id};console.log(t),window.ws.send({event:"hometask.change",data:t})}},{key:"delete",value:function(e){window.ws.send({event:"timetable.subjects.delete",id:e.id})}}]),e}(),Nt=function(){function e(){Object(It["a"])(this,e),this.connect(),this.ready=!1,this.queue=[],this.listeners={},setInterval(this.reconnect,1e3),this.setListeners()}return Object(Tt["a"])(e,[{key:"setListeners",value:function(){this.bellClass=new Dt,this.send({event:this.bellClass.ask}),this.subjectClass=new Lt,this.send({event:this.subjectClass.ask}),this.lessonsClass=new At,this.send({event:this.lessonsClass.ask}),this.hometaskClass=new Bt,this.send({event:this.hometaskClass.ask})}},{key:"localListener",value:function(e){var t=JSON.parse(e.data);switch(t.event){case"authentication.auth":var s=localStorage.getItem("token");null===s?Ct.push("/login").then((function(){})).catch((function(){})):window.ws.send({event:"authentication.token",token:s}),window.ws.ready=!0,window.ws.send();break;case"authentication.token":localStorage.setItem("token",t.token),window.ws.ready=!0,"/login"===Ct.currentRoute.path&&(Ct.push("/").then((function(){})).catch((function(){})),Ct.go(Ct.currentRoute));break;case"authentication.error":localStorage.removeItem("token"),Ct.push("/login").then((function(){})).catch((function(){}));break;case"timetable.bells":window.store.commit("changeBells",t.data);break;case"timetable.subjects":window.store.commit("changeSubjects",t.data);break;case"timetable.lessons":window.store.commit("changeLessons",t.data);break;case"hometask":window.store.commit("changeHometasks",t.data);break}void 0!==window.ws.listeners[t.event]&&window.ws.ready&&window.ws.listeners[t.event](t)}},{key:"connect",value:function(){console.clear(),console.log("Connecting..."),this.websocket=new WebSocket("wss://school-keep.herokuapp.com/wsapi/"),this.websocket.onmessage=this.localListener}},{key:"reconnect",value:function(){window.ws.websocket.readyState===WebSocket.CLOSED&&window.ws.connect()}},{key:"setListener",value:function(e,t){window.ws.listeners[t]=e}},{key:"send",value:function(e){var t=this;void 0!==e&&(e.event.startsWith("authentication.")?this.websocket.send(JSON.stringify(e)):this.queue.push(e)),this.ready&&(this.queue.forEach((function(e){t.websocket.send(JSON.stringify(e))})),this.queue=[])}}]),e}(),Ht={main:{timetable:"Расписание",bells:"Расписание звонков",subjects:"Предметы",devices:"Устройства"},bells:{start:"Время начала",end:"Время конца",days:"Дни"},subjects:{icon:"Значек",subject:"Предмет",room:"Кабинет",teacher:"Преподователь",edit:{name:"Это...",icon:"Его иконка...",room:"Оно в кабинете...",teacher:"Его преподает..."}}},Mt={new:"Новое задание",see:{task:"Задание",subject:"Предмет",deadline:"Дата сдачи",tasks:{new:"Новая задача"}}},Pt={end:"The lessons is over",tillStart:"До начала {time} урока",tillEnd:"До конца {time} урока",ended:"Уроки кончились"},qt={title:"School Keep",settings:Ht,common:{days:{monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота",sunday:"Воскресенье"},days_short:{monday:"пн",tuesday:"вт",wednesday:"ср",thursday:"чт",friday:"пт",saturday:"сб",sunday:"вс"},edit:{edit:"Изменить",cancel:"Отменить",save:"Сохранить",delete:"Удалить"}},countdown:Pt,hometask:Mt,drawer:{home:"Главная",countdown:"Время до...",homework:"Домашнее задание",allHomework:"Все домашнее задание",settings:"Настройки",about:"Что это?",login:"Войти",register:"Зарегистрироваться"},login:{username:"Электронная почта",password:"Пароль",wrongUsername:"Неверное имя пользователя",wrongPassword:"Неверный пароль"},about:{subtitle:"Школьный помошник",description:"Сайт для удобной записи свогео домашнего задания и возможности оотслеживания процесса его выполнения.",presentation:"Презентация",presentation_url:"https://www.canva.com/design/DAE97TPBdLM/view?utm_content=DAE97TPBdLM&utm_campaign=designshare&utm_medium=embeds&utm_source=link",feedback:"Форма обратной связи",feedback_link:"https://docs.google.com/forms/d/e/1FAIpQLSemhlcxf4bIKpIg7HaeXadWZjEe0WZMkwDVCTy6KzlmV7RytQ/viewform?usp=sf_link",source_backend:"Исходный код серверной части",source_frontend:"Исходный код сайта"}},Wt={main:{timetable:"Timetable",bells:"Bell times",subjects:"Subjects",devices:"Authorised devices"},bells:{start:"Start time",end:"End time",days:"Days"},subjects:{icon:"Icon",subject:"Subject",room:"Room",teacher:"Teacher",edit:{name:"It is...",icon:"It's icon...",room:"It's located in room...",teacher:"It's taught by..."}}},Ft={new:"New",see:{task:"Task",subject:"Subject",deadline:"Deadline",tasks:{new:"New task"}}},Rt={end:"The lessons is over",tillStart:"Time till lesson #{0} start",tillEnd:"Time till lesson #{0} end",ended:"Lessons is ended for today"},Vt={title:"School Keep",settings:Wt,common:{days:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},days_short:{monday:"mo",tuesday:"tu",wednesday:"we",thursday:"th",friday:"fr",saturday:"sa",sunday:"su"},edit:{edit:"Edit",cancel:"Cancel",save:"Save",delete:"Delete"}},countdown:Rt,hometask:Ft,drawer:{home:"Home",countdown:"Countdown",homework:"Hometask",allHomework:"All hometasks",settings:"Settings",about:"About",login:"Login",register:"Register"},login:{username:"E-mail",password:"Password",wrongUsername:"Wrong username",wrongPassword:"Wrong password"},about:{subtitle:"School helper",description:"Website for convenient storing homework and checking out is everything is done for school.",presentation:"Presentation",presentation_url:"https://www.canva.com/design/DAE97TPBdLM/view?utm_content=DAE97TPBdLM&utm_campaign=designshare&utm_medium=embeds&utm_source=link",feedback:"Feedback form",feedback_url:"https://forms.gle/zWiLyAbFWPig3YAq9",source_backend:"Backend source code",source_frontend:"Frontend source code"}},Jt={en:Vt,ru:qt},Kt=(s("caad"),s("2532"),{state:{bells:{mo:[],tu:[],we:[],th:[],fr:[],sa:[],su:[]},max_bells:0,current:new Date},mutations:{updateTime:function(e){e.current=new Date},changeBells:function(e,t){function s(e,t){return e.start>t.start?1:e.start<t.start?-1:0}var n={mo:[],tu:[],we:[],th:[],fr:[],sa:[],su:[]};t.forEach((function(e){e.days.includes("mo")&&n.mo.push(e),n.mo=n.mo.sort(s),e.days.includes("tu")&&n.tu.push(e),n.tu=n.tu.sort(s),e.days.includes("we")&&n.we.push(e),n.we=n.we.sort(s),e.days.includes("th")&&n.th.push(e),n.th=n.th.sort(s),e.days.includes("fr")&&n.fr.push(e),n.fr=n.fr.sort(s),e.days.includes("sa")&&n.sa.push(e),n.sa=n.sa.sort(s),e.days.includes("su")&&n.su.push(e),n.su=n.su.sort(s)})),e.max_bells=Math.max(n.mo.length,n.tu.length,n.we.length,n.th.length,n.fr.length,n.sa.length,n.su.length),e.bells=n}},getters:{getBells:function(e){return{bells:e.bells,max_bells:e.max_bells}},todayBells:function(e,t){var s;switch((new Date).getDay()){case 1:s=e.bells.mo;break;case 2:s=e.bells.tu;break;case 3:s=e.bells.we;break;case 4:s=e.bells.th;break;case 5:s=e.bells.fr;break;case 6:s=e.bells.sa;break;case 7:s=e.bells.su;break}return e.todayBells=s,s},nextBell:function(e,t){return t.todayBells[t.nowBellId]},nowBellId:function(e,t){for(var s=0,n=60*e.current.getHours()*60+60*e.current.getMinutes()+e.current.getSeconds(),o=t.todayBells.length;o--;o>0){var a=n-Ut(t.todayBells[o].end);a<0&&(s=o)}return s}},actions:{changeBell:function(e){var t={id:e.id,start:e.start,end:e.end,days:e.days};window.ws.send({event:"timetable.bells.change",data:t})},deleteBell:function(e){window.ws.send({event:"timetable.bells.delete",id:e.id})}}});function Ut(e){var t=parseInt(e.slice(0,2)),s=parseInt(e.slice(3,5)),n=parseInt(e.slice(6,8));return s+=60*t,n+=60*s,n}var zt={state:{tasks:{},tasks_by_server_id:{}},mutations:{changeHometasks:function(e,t){e.tasks={},e.tasks_by_server_id={},t.forEach((function(t){var s=t.deadline;s=new Date(s).toLocaleDateString(),s in e.tasks||(e.tasks[s]=[]),e.tasks[s].push(t),e.tasks_by_server_id[t.id]=t}))}}},Qt={state:{lessons:{mo:{},tu:{},we:{},th:{},fr:{},sa:{},su:{}}},mutations:{changeLessons:function(e,t){t.forEach((function(t){e.lessons[t.day][t.bell.id]=t}))}},getters:{}},Zt={state:{subjects:[]},mutations:{changeSubjects:function(e,t){e.subjects=t}}};n["default"].config.productionTip=!1,n["default"].use(Et.a),n["default"].use(Ot["a"]),n["default"].use($t["VueHammer"]),n["default"].use(xt["a"]);var Xt=new Ot["a"]({locale:navigator.language,silentTranslationWarn:!0,messages:Jt}),Yt=new xt["a"].Store({modules:{bells:Kt,hometasks:zt,lessons:Qt,subjects:Zt}});window.ws=new Nt,window.store=Yt,"1"===window.localStorage.getItem("forceTheme")?console.log(s.e("chunk-743eb49e").then(s.t.bind(null,"0759",7))):"2"===window.localStorage.getItem("forceTheme")?console.log(s.e("chunk-77267223").then(s.t.bind(null,"e094",7))):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?console.log(s.e("chunk-743eb49e").then(s.t.bind(null,"0759",7))):console.log(s.e("chunk-77267223").then(s.t.bind(null,"e094",7))),Ct.afterEach((function(e){n["default"].nextTick((function(){document.title=Xt.t(e.name).toString()+" - "+Xt.t("title").toString()}))})),new n["default"]({router:Ct,i18n:Xt,store:Yt,render:function(e){return e(C)}}).$mount("#app")},"5fb4":function(e,t,s){"use strict";s("48da")},6405:function(e,t,s){"use strict";s("e514")},"6a73":function(e,t,s){"use strict";s("3dce")},"70f2":function(e,t,s){"use strict";s("3b53")},"757d":function(e,t,s){},"76e2":function(e,t,s){},"7c3e":function(e,t,s){},9339:function(e,t,s){"use strict";s("523d")},"9a94":function(e,t,s){"use strict";s("b9c6")},b841:function(e,t,s){"use strict";s("bf7a")},b9c6:function(e,t,s){},ba97:function(e,t,s){},bf7a:function(e,t,s){},c1e2:function(e,t,s){"use strict";s("76e2")},c50e:function(e,t,s){},ce13:function(e,t,s){"use strict";s("ba97")},d687:function(e,t,s){"use strict";s("3d0e")},d78f:function(e,t,s){"use strict";s("f92f")},e514:function(e,t,s){},ec03:function(e,t,s){"use strict";s("0f73")},ef7a:function(e,t,s){},f530:function(e,t,s){"use strict";s("7c3e")},f92f:function(e,t,s){},ff72:function(e,t,s){"use strict";s("2f47")}});